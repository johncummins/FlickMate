<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>{{movieDetails.title}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="movie-page__top">
    <img class="movie-page__top__poster" src="{{posterUrl}}{{movieDetails.poster_path}}" />
    <img class="movie-page__top__background" src="{{backgroundUrl}}{{movieDetails.backdrop_path}}" />
    <div class="movie-page__top__facts">
      <div class="movie-page__top__fact">{{movieDetails.release_date | slice:0:4}}</div>
      <div class="movie-page__top__fact">{{movieGenre1}}, {{movieGenre2}}</div>
      <div class="movie-page__top__fact">{{runtimeFinal}}</div>
    </div>
    <div class="movie-page__top__fact">{{movieDetails.imdb_id}}</div>
    <ion-button (click)="openReviewModal()">Add Review</ion-button>
  </div>

  <!-- <div *ngFor="let item of movieDetails | keyvalue">{{item.value}}</div> -->

  <ion-segment mode="ios" [(ngModel)]="segmentModel" (ionChange)="segmentChanged($event)" color="light">
    <ion-segment-button value="info">
      <ion-label>Info</ion-label>
    </ion-segment-button>
    <ion-segment-button value="reviews">
      <ion-label>Reviews</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div *ngIf="segmentModel === 'info'">
    {{movieDetails.overview}}
    <h1>Available On:</h1>
    <ion-text [hidden]="hideAvailabilityMessage">Not yet available in your chosen country</ion-text>
    <div *ngFor="let item of providersFlatrateArr.flatrate">
      <img src="{{logoUrl}}{{item.logo_path}}" />
    </div>
    <h2>Cast</h2>
    <ion-text animated style="width: 50%" [hidden]="hideCastMessage">Sorry, there is no information regarding cast
      members of this movie</ion-text>
    <div *ngFor="let item of creditsRes.cast | slice:0:16 ">
      {{item.name}}{{noCastErrorMsg}}
    </div>
    <h1>Trailer</h1>
    <img style="width: 240px" src="{{movieTrailerThumb}}" alt="Movie Trailer Thumbnail" />
  </div>
  <div *ngIf="segmentModel === 'reviews'">

    <ion-card *ngFor="let review of returnedReview">
      <ion-row>
        <ion-col size="4">
          <img style="width: 40px" src="{{review.data.authorPhoto}}" alt="Profile Picture" />
        </ion-col>
        <ion-col size="8">
          <ion-card-title>{{review.data.authorName}}</ion-card-title>
          <p>{{review.id}}</p>
        </ion-col>
      </ion-row>
      <ion-card-subtitle>{{reviewDay}}{{reviewDate}}</ion-card-subtitle>
      <p>{{review.reviewHowLongAgo}}</p>
      <ion-card-content>
        {{review.data.content}}
      </ion-card-content>
      <!-- <p>
        timeAGo.timeAgo({{dateTemp}})
      </p> -->
    </ion-card>
  </div>
</ion-content>